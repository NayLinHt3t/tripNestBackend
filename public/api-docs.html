<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TripNest API Documentation</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      .header {
        background: white;
        padding: 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .header h1 {
        color: #667eea;
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .header p {
        color: #666;
        font-size: 1.1em;
      }

      .base-url {
        background: #f7fafc;
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
        border-left: 4px solid #667eea;
      }

      .base-url code {
        color: #667eea;
        font-weight: bold;
        font-size: 1.1em;
      }

      .section {
        background: white;
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .section-title {
        font-size: 1.8em;
        color: #2d3748;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #667eea;
      }

      .endpoint {
        background: #f7fafc;
        border: 1px solid #e2e8f0;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 15px;
        transition: all 0.3s;
      }

      .endpoint:hover {
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        transform: translateY(-2px);
      }

      .endpoint-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 15px;
        flex-wrap: wrap;
      }

      .method {
        padding: 8px 16px;
        border-radius: 6px;
        font-weight: bold;
        font-size: 0.85em;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .method.get {
        background: #48bb78;
        color: white;
      }
      .method.post {
        background: #4299e1;
        color: white;
      }
      .method.put {
        background: #ed8936;
        color: white;
      }
      .method.patch {
        background: #9f7aea;
        color: white;
      }
      .method.delete {
        background: #f56565;
        color: white;
      }

      .path {
        font-family: "Courier New", monospace;
        font-size: 1.1em;
        color: #2d3748;
        font-weight: 600;
      }

      .auth-badge {
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 0.8em;
        font-weight: bold;
      }

      .auth-badge.public {
        background: #c6f6d5;
        color: #22543d;
      }

      .auth-badge.protected {
        background: #fed7d7;
        color: #742a2a;
      }

      .role-badge {
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 0.75em;
        background: #667eea;
        color: white;
        font-weight: 600;
      }

      .description {
        color: #4a5568;
        margin-bottom: 15px;
        line-height: 1.6;
      }

      .code-block {
        background: #2d3748;
        color: #a0aec0;
        padding: 15px;
        border-radius: 8px;
        overflow-x: auto;
        margin-top: 10px;
        font-family: "Courier New", monospace;
        font-size: 0.9em;
      }

      .code-block pre {
        margin: 0;
      }

      .json-key {
        color: #4299e1;
      }
      .json-string {
        color: #48bb78;
      }
      .json-number {
        color: #ed8936;
      }

      .collapsible {
        cursor: pointer;
        user-select: none;
        display: inline-block;
        color: #667eea;
        font-weight: 600;
        margin-top: 10px;
      }

      .collapsible:hover {
        text-decoration: underline;
      }

      .collapsible-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
      }

      .collapsible-content.active {
        max-height: 2000px;
      }

      .info-box {
        background: #edf2f7;
        border-left: 4px solid #4299e1;
        padding: 15px;
        margin: 15px 0;
        border-radius: 5px;
      }

      .info-box strong {
        color: #2d3748;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .stat-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 25px;
        border-radius: 10px;
        text-align: center;
      }

      .stat-number {
        font-size: 3em;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .stat-label {
        font-size: 1.1em;
        opacity: 0.9;
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 1.8em;
        }

        .endpoint-header {
          flex-direction: column;
          align-items: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üöÄ TripNest API Documentation</h1>
        <p>Complete API reference for frontend integration</p>
        <div class="base-url">
          <strong>Base URL:</strong> <code id="base-url">Loading...</code>
        </div>

        <div class="grid" style="margin-top: 20px">
          <div class="stat-card">
            <div class="stat-number">17</div>
            <div class="stat-label">Total Endpoints</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">3</div>
            <div class="stat-label">User Roles</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">4</div>
            <div class="stat-label">Main Resources</div>
          </div>
        </div>
      </div>

      <!-- Authentication Section -->
      <div class="section">
        <h2 class="section-title">üîê Authentication</h2>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method post">POST</span>
            <span class="path">/api/auth/register</span>
            <span class="auth-badge public">Public</span>
          </div>
          <p class="description">Register a new user account</p>
          <div class="collapsible" onclick="toggleCollapse(this)">
            ‚ñº View Details
          </div>
          <div class="collapsible-content">
            <div class="info-box">
              <strong>Request Body:</strong>
            </div>
            <div class="code-block">
              <pre>{
  <span class="json-key">"username"</span>: <span class="json-string">"johndoe"</span>,
  <span class="json-key">"email"</span>: <span class="json-string">"john@example.com"</span>,
  <span class="json-key">"password"</span>: <span class="json-string">"password123"</span>,
  <span class="json-key">"role"</span>: <span class="json-string">"user"</span> <span style="color: #888;">// Optional: "user" | "creator" | "admin"</span>
}</pre>
            </div>
            <div class="info-box">
              <strong>Response (201):</strong>
            </div>
            <div class="code-block">
              <pre>{
  <span class="json-key">"success"</span>: <span class="json-number">true</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"User registered successfully"</span>,
  <span class="json-key">"user"</span>: {
    <span class="json-key">"id"</span>: <span class="json-string">"507f1f77bcf86cd799439011"</span>,
    <span class="json-key">"username"</span>: <span class="json-string">"johndoe"</span>,
    <span class="json-key">"email"</span>: <span class="json-string">"john@example.com"</span>,
    <span class="json-key">"phone_number"</span>: <span class="json-string">"+1234567890"</span>,
    <span class="json-key">"date_of_birth"</span>: <span class="json-string">"1990-01-01"</span>,
    <span class="json-key">"profile_picture"</span>: <span class="json-string">"https://example.com/avatar.jpg"</span>,
    <span class="json-key">"gender"</span>: <span class="json-string">"female"</span>,
    <span class="json-key">"role"</span>: <span class="json-string">"user"</span>,
    <span class="json-key">"createdAt"</span>: <span class="json-string">"2025-11-06T12:34:56.789Z"</span>
  }
}</pre>
            </div>
          </div>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method post">POST</span>
            <span class="path">/api/auth/login</span>
            <span class="auth-badge public">Public</span>
          </div>
          <p class="description">Login to get authentication token</p>
          <div class="collapsible" onclick="toggleCollapse(this)">
            ‚ñº View Details
          </div>
          <div class="collapsible-content">
            <div class="info-box">
              <strong>Request Body:</strong>
            </div>
            <div class="code-block">
              <pre>{
  <span class="json-key">"email"</span>: <span class="json-string">"john@example.com"</span>,
  <span class="json-key">"password"</span>: <span class="json-string">"password123"</span>
}</pre>
            </div>
            <div class="info-box">
              <strong>Response (200):</strong>
            </div>
            <div class="code-block">
              <pre>{
  <span class="json-key">"success"</span>: <span class="json-number">true</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"Login successful"</span>,
  <span class="json-key">"token"</span>: <span class="json-string">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."</span>,
  <span class="json-key">"user"</span>: {
    <span class="json-key">"id"</span>: <span class="json-string">"507f1f77bcf86cd799439011"</span>,
    <span class="json-key">"username"</span>: <span class="json-string">"johndoe"</span>,
    <span class="json-key">"email"</span>: <span class="json-string">"john@example.com"</span>,
    <span class="json-key">"role"</span>: <span class="json-string">"user"</span>
  }
}</pre>
            </div>
            <div class="info-box">
              <strong>üí° Important:</strong> Save the token and include it in
              all protected requests as:<br />
              <code>Authorization: Bearer YOUR_TOKEN_HERE</code>
            </div>
          </div>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method post">POST</span>
            <span class="path">/api/auth/logout</span>
            <span class="auth-badge protected">Protected</span>
          </div>
          <p class="description">
            Logout current user (client-side token removal)
          </p>
          <div class="collapsible" onclick="toggleCollapse(this)">
            ‚ñº View Details
          </div>
          <div class="collapsible-content">
            <div class="info-box">
              <strong>Headers Required:</strong>
            </div>
            <div class="code-block">
              <pre>Authorization: Bearer YOUR_TOKEN_HERE</pre>
            </div>
            <div class="info-box">
              <strong>Response (200):</strong>
            </div>
            <div class="code-block">
              <pre>{
  <span class="json-key">"success"</span>: <span class="json-number">true</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"Logout successful. Please remove the token from client storage."</span>
}</pre>
            </div>
          </div>
        </div>

        <!-- Forgot Password -->
        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method post">POST</span>
            <span class="path">/api/auth/forgot-password</span>
            <span class="auth-badge public">Public</span>
          </div>
          <p class="description">
            Request a password reset token to be sent to the user's email.
          </p>
          <div class="collapsible" onclick="toggleCollapse(this)">
            ‚ñº View Details
          </div>
          <div class="collapsible-content">
            <div class="info-box">
              <strong>Request Body:</strong>
            </div>
            <div class="code-block">
              <pre>{
  <span class="json-key">"email"</span>: <span class="json-string">"john@example.com"</span>
}</pre>
            </div>
            <div class="info-box">
              <strong>Possible Responses:</strong>
            </div>
            <div class="code-block">
              <pre>// 200 - Email sent
{
  <span class="json-key">"success"</span>: <span class="json-number">true</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"Password reset email sent"</span>
}

// 400 - Missing email
{
  <span class="json-key">"success"</span>: <span class="json-number">false</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"Email is required"</span>
}

// 404 - User not found
{
  <span class="json-key">"success"</span>: <span class="json-number">false</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"User not found"</span>
}
</pre>
            </div>
            <div class="info-box">
              <strong>Note:</strong> This controller currently returns 404 when
              the email isn't found. If you prefer to avoid exposing user
              existence, change the controller to return a generic 200 message
              instead.
            </div>
          </div>
        </div>

        <!-- Reset Password -->
        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method post">POST</span>
            <span class="path">/api/auth/reset-password</span>
            <span class="auth-badge public">Public</span>
          </div>
          <p class="description">
            Reset a user's password using the reset token.
          </p>
          <div class="collapsible" onclick="toggleCollapse(this)">
            ‚ñº View Details
          </div>
          <div class="collapsible-content">
            <div class="info-box">
              <strong>Request Body:</strong>
            </div>
            <div class="code-block">
              <pre>{
  <span class="json-key">"resetToken"</span>: <span class="json-string">"reset-token-here"</span>,
  <span class="json-key">"newPassword"</span>: <span class="json-string">"newPassword123"</span>
}</pre>
            </div>
            <div class="info-box">
              <strong>Possible Responses:</strong>
            </div>
            <div class="code-block">
              <pre>// 200 - Password reset
{
  <span class="json-key">"success"</span>: <span class="json-number">true</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"Password has been reset successfully"</span>
}

// 400 - Missing required fields
{
  <span class="json-key">"success"</span>: <span class="json-number">false</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"Reset token and new password are required"</span>
}

// 400 - Invalid or expired token
{
  <span class="json-key">"success"</span>: <span class="json-number">false</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"Invalid or expired reset token"</span>
}
</pre>
            </div>
            <div class="info-box">
              <strong>Security:</strong> Tokens should be single-use and
              time-limited. The controller clears the token on successful reset.
            </div>
          </div>
        </div>
      </div>

      <!-- User Profile Section -->
      <div class="section">
        <h2 class="section-title">üë§ User Profile</h2>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method get">GET</span>
            <span class="path">/api/user/profile</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">All Roles</span>
          </div>
          <p class="description">Get current user's profile information</p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method put">PUT</span>
            <span class="path">/api/user/profile</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">All Roles</span>
          </div>
          <p class="description">Update current user's profile</p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method delete">DELETE</span>
            <span class="path">/api/user/profile</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">All Roles</span>
          </div>
          <p class="description">Delete current user's account</p>
        </div>
      </div>

      <!-- Admin Routes Section -->
      <div class="section">
        <h2 class="section-title">‚öôÔ∏è Admin - User Management</h2>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method get">GET</span>
            <span class="path">/api/user/</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">Admin Only</span>
          </div>
          <p class="description">Get list of all users</p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method delete">DELETE</span>
            <span class="path">/api/user/:userId</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">Admin Only</span>
          </div>
          <p class="description">Delete any user account</p>
        </div>
      </div>

      <!-- Events Section -->
      <div class="section">
        <h2 class="section-title">üéâ Events</h2>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method get">GET</span>
            <span class="path">/api/event/events</span>
            <span class="auth-badge public">Public</span>
          </div>
          <p class="description">
            Get all events (public listing with filtering)
          </p>
          <div class="collapsible" onclick="toggleCollapse(this)">
            ‚ñº View Details
          </div>
          <div class="collapsible-content">
            <div class="info-box">
              <strong>Query Parameters (Optional):</strong><br />
              ‚Ä¢ <code>page</code> - Page number<br />
              ‚Ä¢ <code>limit</code> - Items per page<br />
              ‚Ä¢ <code>search</code> - Search term<br />
              ‚Ä¢ <code>category</code> - Filter by category<br />
              ‚Ä¢ <code>location</code> - Filter by location
            </div>
          </div>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method get">GET</span>
            <span class="path">/api/event/events/:eventId</span>
            <span class="auth-badge public">Public</span>
          </div>
          <p class="description">Get specific event details</p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method post">POST</span>
            <span class="path">/api/event/events</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">Creator Only</span>
          </div>
          <p class="description">Create a new event</p>
          <div class="collapsible" onclick="toggleCollapse(this)">
            ‚ñº View Details
          </div>
          <div class="collapsible-content">
            <div class="code-block">
              <pre>{
  <span class="json-key">"title"</span>: <span class="json-string">"Mountain Hiking Adventure"</span>,
  <span class="json-key">"description"</span>: <span class="json-string">"Exciting hiking trip..."</span>,
  <span class="json-key">"location"</span>: <span class="json-string">"Colorado"</span>,
  <span class="json-key">"date"</span>: <span class="json-string">"2025-12-01"</span>,
  <span class="json-key">"maxParticipants"</span>: <span class="json-number">20</span>,
  <span class="json-key">"price"</span>: <span class="json-number">150</span>
}</pre>
            </div>
          </div>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method put">PUT</span>
            <span class="path">/api/event/events/:eventId</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">Creator Only</span>
          </div>
          <p class="description">
            Update an event (creator can only update their own events)
          </p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method delete">DELETE</span>
            <span class="path">/api/event/events/:eventId</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">Creator, Admin</span>
          </div>
          <p class="description">Delete an event</p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method get">GET</span>
            <span class="path">/api/event/my-events</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">Creator Only</span>
          </div>
          <p class="description">Get events created by current user</p>
        </div>
      </div>

      <!-- Bookings Section -->
      <div class="section">
        <h2 class="section-title">üìÖ Bookings</h2>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method post">POST</span>
            <span class="path">/api/booking/</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">User Only</span>
          </div>
          <p class="description">Create a new booking for an event</p>
          <div class="collapsible" onclick="toggleCollapse(this)">
            ‚ñº View Details
          </div>
          <div class="collapsible-content">
            <div class="code-block">
              <pre>{
  <span class="json-key">"eventId"</span>: <span class="json-string">"507f1f77bcf86cd799439011"</span>,
  <span class="json-key">"participants"</span>: <span class="json-number">2</span>,
  <span class="json-key">"specialRequests"</span>: <span class="json-string">"Vegetarian meals"</span>
}</pre>
            </div>
          </div>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method get">GET</span>
            <span class="path">/api/booking/my-bookings</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">User Only</span>
          </div>
          <p class="description">Get all bookings for current user</p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method get">GET</span>
            <span class="path">/api/booking/:bookingId</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">User Only</span>
          </div>
          <p class="description">Get specific booking details</p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method put">PUT</span>
            <span class="path">/api/booking/:bookingId</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">User Only</span>
          </div>
          <p class="description">Update booking details</p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method delete">DELETE</span>
            <span class="path">/api/booking/:bookingId</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">User Only</span>
          </div>
          <p class="description">Cancel a booking</p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method get">GET</span>
            <span class="path">/api/booking/bookings-for-my-events</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">Creator Only</span>
          </div>
          <p class="description">
            Get all bookings for events created by current user
          </p>
        </div>

        <div class="endpoint">
          <div class="endpoint-header">
            <span class="method get">GET</span>
            <span class="path">/api/booking/event/:eventId/bookings</span>
            <span class="auth-badge protected">Protected</span>
            <span class="role-badge">Creator Only</span>
          </div>
          <p class="description">Get all bookings for a specific event</p>
        </div>
      </div>

      <!-- Quick Reference Section -->
      <div class="section">
        <h2 class="section-title">üìö Quick Reference</h2>

        <div class="info-box">
          <strong>Authentication Header Format:</strong><br />
          All protected endpoints require:
          <code>Authorization: Bearer YOUR_JWT_TOKEN</code>
        </div>

        <div class="info-box">
          <strong>User Roles:</strong><br />
          ‚Ä¢ <strong>user</strong> - Normal users (default)<br />
          ‚Ä¢ <strong>creator</strong> - Event creators<br />
          ‚Ä¢ <strong>admin</strong> - System administrators
        </div>

        <div class="info-box">
          <strong>Common Error Responses:</strong><br />
          ‚Ä¢ <code>400</code> - Bad Request (validation errors)<br />
          ‚Ä¢ <code>401</code> - Unauthorized (authentication required)<br />
          ‚Ä¢ <code>403</code> - Forbidden (insufficient permissions)<br />
          ‚Ä¢ <code>404</code> - Not Found<br />
          ‚Ä¢ <code>409</code> - Conflict (duplicate resource)<br />
          ‚Ä¢ <code>500</code> - Server Error
        </div>

        <div class="info-box">
          <strong>Response Format:</strong><br />
          All API responses follow this structure:
          <div class="code-block">
            <pre>{
  <span class="json-key">"success"</span>: <span class="json-number">true/false</span>,
  <span class="json-key">"message"</span>: <span class="json-string">"Status message"</span>,
  <span class="json-key">"data"</span>: { <span style="color: #888;">/* Response data */</span> }
}</pre>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Dynamically set base URL based on current host
      function setBaseUrl() {
        const protocol = window.location.protocol;
        const host = window.location.host;
        const baseUrl = `${protocol}//${host}/api`;
        document.getElementById("base-url").textContent = baseUrl;
      }

      function toggleCollapse(element) {
        const content = element.nextElementSibling;
        content.classList.toggle("active");
        element.textContent = content.classList.contains("active")
          ? "‚ñ≤ Hide Details"
          : "‚ñº View Details";
      }

      // Set base URL when page loads
      window.addEventListener("DOMContentLoaded", setBaseUrl);
    </script>
  </body>
</html>
